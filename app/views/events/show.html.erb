<% if @event.logo_path? %>
  <%= image_tag @event.logo_path  %>
<%end%>
<h1><%=h @event.name %></h1>

<p>
  <b>Promoter:</b> <%=link_to h( @event.promoter), @event.website, :target=>"new" %>
</p>

<p>
  <b>Date:</b> <%=h @event.start_date %>
</p>

<% if @event.is_series %>
  <p>
    <b>End date:</b> <%=h @event.end_date %>
  </p>
<%end %>

<p>
  <b>Venue Location:</b> <%=h @event.venue_location.upcase %>
  <%=h @event.city.capitalize %>, <%=h @event.state %>
</p>

<p>
  <b>Event Type:</b> <%=h @event.event_type %>
</p>
<p>
  <b>Notes:</b><br/>
<%=h @event.notes %>
</p>

<div id="map"></div>


<script src="http://maps.google.com/maps?file=api&v=2&key=<%= google_map_api_key  %> "
type="text/javascript"></script>

<script type="text/javascript">
  // helper function to create markers
  function createMarker(point,html) {
    var marker = new GMarker(point);
    GEvent.addListener(marker, "click", function() {
      marker.openInfoWindowHtml(html);
    });
    return marker;
  }

  // this is called when the page loads.
  // it initializes the map, and creates each marker
  function initialize() {


    if (GBrowserIsCompatible()) {


      var map = new GMap(document.getElementById("map"));
      map.addControl(new GSmallMapControl());
      map.centerAndZoom(new GPoint(<%= "#{@event.lng},#{@event.lat}" %>), 9);
      var point = new GPoint(<%=@event[:lng]%>,<%=@event[:lat]%>);
      var marker = createMarker(point, '<%=marker(@event)%>')
      map.addOverlay(marker);

    }


  }


</script>

<script type="text/javascript">
  document.observe("dom:loaded", function() {
    // initially hide all containers for tab content
    initialize()
  });

</script>